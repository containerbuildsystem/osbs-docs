branches:
  only:
    - master

stages:
  - lint
  - build

jobs:
  include:
    - stage: lint
      language: ruby
      install:
      - gem install mdl
      script:
      - mdl *.md

    - stage: build
      language: python
      install:
        - pip install -r docs/requirements.txt
        - sudo apt-get install graphviz
      before_script: cd docs
      script:
        - make html
        - make linkcheck
